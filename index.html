
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seguimiento de Partido</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f4f4f9;
        }
        .container {
            width: 80%;
            max-width: 800px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        .stat-item {
            background: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .stat-item button {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            background: #007bff;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }
        .stat-item button.active {
            background: #0056b3;
        }
        .stat-item button:hover {
            background: #0056b3;
        }
        .timer {
            text-align: center;
            margin-top: 20px;
        }
        .timer button {
            padding: 10px 15px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            background: #28a745;
            color: white;
            cursor: pointer;
            font-size: 16px;
        }
        .timer button.active {
            background: #218838;
        }
        .timer button:hover {
            background: #218838;
        }
        .pause-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .pause-buttons button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background: #dc3545;
            color: white;
            cursor: pointer;
            font-size: 16px;
        }
        .pause-buttons button:hover {
            background: #c82333;
        }
        .elapsed-time {
            margin-top: 20px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }
        .paused-time {
            text-align: center;
            font-size: 14px;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Seguimiento de Partido</h1>
        <div class="stats">
            <div class="stat-item">
                <span>Goles Equipo A:</span>
                <span id="golesA">0</span>
                <button onclick="increment('golesA', 'Gol Equipo A')">+</button>
            </div>
            <div class="stat-item">
                <span>Goles Equipo B:</span>
                <span id="golesB">0</span>
                <button onclick="increment('golesB', 'Gol Equipo B')">+</button>
            </div>
            <div class="stat-item">
                <span>Pases Equipo A:</span>
                <span id="pasesA">0</span>
                <button onclick="increment('pasesA')">+</button>
            </div>
            <div class="stat-item">
                <span>Pases Equipo B:</span>
                <span id="pasesB">0</span>
                <button onclick="increment('pasesB')">+</button>
            </div>
            <div class="stat-item">
                <span>Tiros Equipo A:</span>
                <span id="tirosA">0</span>
                <button onclick="increment('tirosA', 'Tiro Equipo A')">+</button>
            </div>
            <div class="stat-item">
                <span>Tiros Equipo B:</span>
                <span id="tirosB">0</span>
                <button onclick="increment('tirosB', 'Tiro Equipo B')">+</button>
            </div>
        </div>
        <div class="timer">
            <h2>Posesión del Balón</h2>
            <div>
                <span>Tiempo Equipo A:</span>
                <span id="timerA">0:00</span>
                <button onclick="startTimer('A', this)">Equipo A</button>
            </div>
            <div>
                <span>Tiempo Equipo B:</span>
                <span id="timerB">0:00</span>
                <button onclick="startTimer('B', this)">Equipo B</button>
            </div>
        </div>
        <div class="elapsed-time">
            <span>Tiempo Transcurrido: </span>
            <span id="elapsedTime">0:00</span>
        </div>
        <div class="paused-time">
            <span>Tiempo Pausado: </span>
            <span id="pausedTime">0:00</span>
        </div>
        <div class="pause-buttons">
            <button onclick="pauseBothTimers()">Tiempo Pausado</button>
            <button onclick="pauseAll()">Pausar Todo</button>
            <button onclick="resetAll()">Reiniciar Todo</button>
        </div>
        <button class="export-btn" onclick="exportStats()">Exportar Estadísticas</button>
    </div>
    <script>
        let timers = { A: 0, B: 0 };
        let elapsed = 0;
        let paused = 0;
        let intervals = { A: null, B: null };
        let elapsedInterval = null;
        let pausedInterval = null;
        const events = [];

        function increment(id, event = null) {
            const element = document.getElementById(id);
            const currentValue = parseInt(element.innerText, 10);
            element.innerText = currentValue + 1;

            if (event) {
                events.push({ event, timestamp: elapsed });
            }
        }

        function startTimer(team, button) {
            // Activate button style
            document.querySelectorAll('.timer button').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            // Start elapsed time tracking if not already running
            if (!elapsedInterval) {
                elapsedInterval = setInterval(() => {
                    elapsed++;
                    const minutes = Math.floor(elapsed / 60);
                    const seconds = elapsed % 60;
                    document.getElementById('elapsedTime').innerText = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                }, 1000);
            }

            // Stop paused time tracking
            clearInterval(pausedInterval);
            pausedInterval = null;

            // Stop other team's timer
            const otherTeam = team === 'A' ? 'B' : 'A';
            pauseTimer(otherTeam);

            // Start current team's timer
            if (intervals[team]) return; // Prevent multiple intervals
            intervals[team] = setInterval(() => {
                timers[team]++;
                const minutes = Math.floor(timers[team] / 60);
                const seconds = timers[team] % 60;
                document.getElementById(`timer${team}`).innerText = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            }, 1000);
        }

        function pauseTimer(team) {
            clearInterval(intervals[team]);
            intervals[team] = null;
        }

        function pauseBothTimers() {
            pauseTimer('A');
            pauseTimer('B');

            // Start paused time tracking
            if (!pausedInterval) {
                pausedInterval = setInterval(() => {
                    paused++;
                    const minutes = Math.floor(paused / 60);
                    const seconds = paused % 60;
                    document.getElementById('pausedTime').innerText = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                }, 1000);
            }
        }

        function pauseAll() {
            pauseBothTimers();
            clearInterval(elapsedInterval);
            elapsedInterval = null;
        }

        function resetAll() {
            pauseAll();
            timers = { A: 0, B: 0 };
            elapsed = 0;
            paused = 0;
            events.length = 0;
            document.getElementById('timerA').innerText = '0:00';
            document.getElementById('timerB').innerText = '0:00';
            document.getElementById('elapsedTime').innerText = '0:00';
            document.getElementById('pausedTime').innerText = '0:00';
            document.getElementById('golesA').innerText = '0';
            document.getElementById('golesB').innerText = '0';
            document.getElementById('pasesA').innerText = '0';
            document.getElementById('pasesB').innerText = '0';
            document.getElementById('tirosA').innerText = '0';
            document.getElementById('tirosB').innerText = '0';
        }

        function exportStats() {
            const stats = {
                golesA: document.getElementById('golesA').innerText,
                golesB: document.getElementById('golesB').innerText,
                pasesA: document.getElementById('pasesA').innerText,
                pasesB: document.getElementById('pasesB').innerText,
                tirosA: document.getElementById('tirosA').innerText,
                tirosB: document.getElementById('tirosB').innerText,
                tiempoA: document.getElementById('timerA').innerText,
                tiempoB: document.getElementById('timerB').innerText,
                tiempoTranscurrido: document.getElementById('elapsedTime').innerText,
                tiempoPausado: document.getElementById('pausedTime').innerText
            };

            const csvContent = "data:text/csv;charset=utf-8,"
                + "Evento,Timestamp\n"
                + events.map(e => `${e.event},${e.timestamp}`).join("\n")
                + "\n\n"
                + Object.keys(stats).join(",") + "\n"
                + Object.values(stats).join(",");

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "estadisticas_partido.csv");
            document.body.appendChild(link);

            link.click();
        }
    </script>
</body>
</html>
